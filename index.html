<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üíù Be My Valentine?</title>
    <style>
        /* ===== RESET AND BASIC STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 50%, #ffd1ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            touch-action: pan-y;
        }

        /* ===== ANIMATED BACKGROUND HEARTS ===== */
        .heart-bg {
            position: absolute;
            font-size: 40px;
            opacity: 0.15;
            animation: float 6s ease-in-out infinite;
            pointer-events: none;
            user-select: none;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg); 
                opacity: 0.15;
            }
            50% { 
                transform: translateY(-30px) rotate(10deg); 
                opacity: 0.25;
            }
        }

        /* ===== MAIN CONTAINER ===== */
        .container {
            text-align: center;
            padding: 30px 20px;
            max-width: 600px;
            width: 95%;
            position: relative;
            z-index: 10;
        }

        /* ===== QUESTION SCREEN ===== */
        #question-screen {
            display: block;
        }

        .emoji-main {
            font-size: 100px;
            animation: bounce 2s ease-in-out infinite;
            margin-bottom: 20px;
            user-select: none;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-15px) scale(1.1); }
        }

        h1 {
            font-size: 2.8em;
            color: #d81b60;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
            font-weight: 800;
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.4em;
            color: #ad1457;
            margin-bottom: 20px;
            font-weight: 600;
        }

        /* ===== BUTTONS CONTAINER ===== */
        .buttons-container {
            position: relative;
            min-height: 250px;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        /* ===== YES BUTTON ===== */
        .yes-btn {
            background: linear-gradient(135deg, #f50057 0%, #c51162 100%);
            color: white;
            border: none;
            padding: 22px 70px;
            font-size: 1.8em;
            font-weight: 900;
            border-radius: 60px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(245, 0, 87, 0.5);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 300;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .yes-btn:hover {
            transform: scale(1.15) translateY(-5px);
            box-shadow: 0 15px 40px rgba(245, 0, 87, 0.7);
        }

        .yes-btn:active {
            transform: scale(1.05);
        }

        /* ===== NO BUTTON (THE ELUSIVE ONE) ===== */
        .no-btn {
            background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%);
            color: white;
            border: none;
            padding: 22px 70px;
            font-size: 1.8em;
            font-weight: 900;
            border-radius: 60px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            position: relative;
            transition: all 0.15s ease-out;
            touch-action: none;
            user-select: none;
            cursor: not-allowed;
            z-index: 100;
            pointer-events: auto;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Cursor changes when hovering near No button */
        .no-btn:hover {
            cursor: not-allowed;
        }

        /* ===== HINT MESSAGE ===== */
        .hint {
            margin-top: 25px;
            font-size: 1.3em;
            color: #c51162;
            font-weight: 700;
            display: none;
            animation: pulse 1.5s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.05);
            }
        }

        /* ===== SUCCESS SCREEN ===== */
        #success-screen {
            display: none;
        }

        .success-content {
            animation: zoomInRotate 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes zoomInRotate {
            from { 
                transform: scale(0) rotate(-180deg); 
                opacity: 0; 
            }
            to { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
            }
        }

        .success-emoji {
            font-size: 140px;
            margin-bottom: 30px;
            animation: heartbeat 1.5s ease infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            10%, 30% { transform: scale(1.2); }
            20%, 40% { transform: scale(1.1); }
        }

        .success-title {
            font-size: 3.5em;
            color: #f50057;
            margin-bottom: 25px;
            font-weight: 900;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.15);
        }

        .success-text {
            font-size: 1.8em;
            color: #c51162;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .hearts-row {
            font-size: 3.5em;
            margin-top: 30px;
            animation: float 3s ease-in-out infinite;
        }

        /* ===== ATTEMPT COUNTER ===== */
        .attempt-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 700;
            color: #d81b60;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 300;
            display: none;
        }

        /* ===== MOBILE RESPONSIVENESS ===== */
        @media (max-width: 600px) {
            h1 { font-size: 2.2em; }
            .subtitle { font-size: 1.2em; }
            .yes-btn { 
                font-size: 1.5em; 
                padding: 20px 55px; 
            }
            .no-btn { 
                font-size: 1.5em; 
                padding: 20px 55px; 
            }
            .emoji-main { font-size: 80px; }
            .success-emoji { font-size: 100px; }
            .success-title { font-size: 2.5em; }
            .success-text { font-size: 1.4em; }
            .buttons-container {
                gap: 20px;
            }
            .photo-placeholder {
                max-width: 350px;
            }
            .photos-grid {
                flex-direction: column;
                align-items: center;
            }
            .photo-item {
                width: 90%;
                max-width: 350px;
            }
        }

        @media (max-width: 400px) {
            h1 { font-size: 1.8em; }
            .yes-btn { 
                font-size: 1.3em; 
                padding: 18px 40px; 
            }
            .no-btn { 
                font-size: 1.3em; 
                padding: 18px 40px; 
            }
            .buttons-container {
                gap: 15px;
            }
            .photo-placeholder {
                max-width: 280px;
            }
            .photo-small {
                max-width: 280px;
            }
        }

        /* Stack buttons vertically on very small screens */
        @media (max-width: 350px) {
            .buttons-container {
                flex-direction: column;
                gap: 20px;
            }
        }

        /* Tablet - 2 photos per row */
        @media (min-width: 601px) and (max-width: 900px) {
            .photo-item {
                width: 45%;
                min-width: 200px;
            }
        }

        /* ===== PHOTO PLACEHOLDERS ===== */
        .photo-placeholder {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 20px;
            object-fit: contain;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 5px solid white;
            margin: 20px auto;
            display: block;
            background: linear-gradient(135deg, #ffd1dc 0%, #ffb6c1 100%);
        }

        .photo-placeholder.hidden {
            display: none;
        }

        .photos-grid {
            display: flex;
            flex-direction: row;
            gap: 20px;
            margin: 30px 0;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            align-items: flex-start;
            justify-content: center;
            flex-wrap: wrap;
        }

        .photo-item {
            width: 30%;
            min-width: 250px;
            max-width: 350px;
            text-align: center;
        }

        .photo-small {
            width: 100%;
            height: auto;
            border-radius: 15px;
            object-fit: contain;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            border: 4px solid white;
            background: white;
            display: block;
            margin: 0 auto 10px auto;
        }

        .photo-caption {
            font-size: 1.1em;
            color: #ad1457;
            font-weight: 600;
            font-style: italic;
            margin-top: 10px;
            padding: 0 20px;
        }

        .upload-hint {
            display: none;
        }

        /* ===== ALREADY ACCEPTED SCREEN ===== */
        #already-accepted-screen {
            display: none;
        }

        .already-content {
            animation: fadeIn 1s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .memory-text {
            font-size: 1.3em;
            color: #ad1457;
            margin: 15px 0;
            font-weight: 500;
        }

        .date-stamp {
            font-size: 1.1em;
            color: #ec407a;
            margin-top: 20px;
            font-weight: 600;
            background: rgba(255,255,255,0.5);
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
        }

        .reset-btn {
            background: #9e9e9e;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            font-weight: 600;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: #757575;
            transform: scale(1.05);
        }

        /* ===== TOUCH DETECTION RING ===== */
        .touch-ring {
            position: fixed;
            width: 150px;
            height: 150px;
            border: 3px dashed #f50057;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 50;
            transform: translate(-50%, -50%);
        }

        .touch-ring.active {
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <!-- Background floating hearts -->
    <div class="heart-bg" style="left: 5%; top: 15%; animation-delay: 0s;">‚ù§Ô∏è</div>
    <div class="heart-bg" style="left: 85%; top: 25%; animation-delay: 1s;">üíï</div>
    <div class="heart-bg" style="left: 10%; top: 75%; animation-delay: 2s;">üíñ</div>
    <div class="heart-bg" style="left: 90%; top: 65%; animation-delay: 1.5s;">üíó</div>
    <div class="heart-bg" style="left: 50%; top: 10%; animation-delay: 0.5s;">üíù</div>
    <div class="heart-bg" style="left: 25%; top: 50%; animation-delay: 2.5s;">üíò</div>
    <div class="heart-bg" style="left: 75%; top: 85%; animation-delay: 3s;">üíû</div>

    <!-- Attempt counter -->
    <div class="attempt-counter" id="attemptCounter">
        Attempts: <span id="attemptCount">0</span>
    </div>

    <!-- Touch detection ring (visual feedback) -->
    <div class="touch-ring" id="touchRing"></div>

    <!-- Main container -->
    <div class="container">
        <!-- Question screen -->
        <div id="question-screen">
            <div class="emoji-main">üíå</div>
            
            <!-- PHOTO PLACEHOLDER - Replace src with your image URL -->
            <img id="questionPhoto" src="" alt="Our Photo" class="photo-placeholder hidden">
            
            <h1>Reeva Fofaria, my Honeybun, Will You make this pakora the happiest guy on earth and Be My Valentine?</h1>
            <p class="subtitle">You mean the world to me! üíï</p>
            
            <div class="buttons-container">
                <button class="yes-btn" id="yesBtn">Yes! üíñ</button>
                <button class="no-btn" id="noBtn">No</button>
            </div>
            
            <div class="hint" id="hint"></div>
        </div>

        <!-- Success screen -->
        <div id="success-screen">
            <div class="success-content">
                <div class="success-emoji">üíù</div>
                <h1 class="success-title">Yay! üéâ</h1>
                <p class="success-text">You've made me the happiest!</p>
                <p class="success-text">I love you so much! ‚ù§Ô∏è</p>
                
                <!-- PHOTO GRID - Add multiple photos here with captions -->
                <div class="photos-grid">
                    <div class="photo-item">
                        <img id="successPhoto1" src="" alt="Memory 1" class="photo-small hidden">
                        <p class="photo-caption" id="caption1"></p>
                    </div>
                    <div class="photo-item">
                        <img id="successPhoto2" src="" alt="Memory 2" class="photo-small hidden">
                        <p class="photo-caption" id="caption2"></p>
                    </div>
                    <div class="photo-item">
                        <img id="successPhoto3" src="" alt="Memory 3" class="photo-small hidden">
                        <p class="photo-caption" id="caption3"></p>
                    </div>
                </div>
                
                <div class="hearts-row">üòç üíï ü•∞ üíñ ‚ú®</div>
                
                <button class="reset-btn" id="resetBtnSuccess">Ask Me Again üîÑ</button>
            </div>
        </div>

        <!-- Already Accepted screen (shown on return visits) -->
        <div id="already-accepted-screen">
            <div class="already-content">
                <div class="success-emoji">üíñ</div>
                <h1 class="success-title">You Already Said Yes! üéâ</h1>
                <p class="memory-text">Remember when you made my heart skip a beat?</p>
                
                <!-- PHOTO PLACEHOLDER for memories -->
                <img id="memoryPhoto" src="" alt="Our Memory" class="photo-placeholder hidden">
                
                <p class="date-stamp" id="acceptanceDate">Accepted on: Loading...</p>
                <p class="memory-text">Every day since has been amazing! ‚ù§Ô∏è</p>
                <div class="hearts-row">üíï üíñ üíó üíò üíù</div>
                
                <button class="reset-btn" id="resetBtn">Ask Me Again üîÑ</button>
            </div>
        </div>
    </div>

    <!-- ===== JAVASCRIPT - THE MAGIC ===== -->
    <script>
        // ===== CONFIGURATION: ADD YOUR IMAGE URLs HERE =====
        const IMAGE_CONFIG = {

// Main photo on question screen (shown before they answer)
            questionPhoto: 'https://raw.githubusercontent.com/WNobsi/reeva-lentine/a20233da616d41aa9569e05336e03134c0e12b7d/photos/question-photo.jpg', // Example: 'https://i.imgur.com/yourimage.jpg'
            
            // Photos on success screen (shown after they say yes)
            successPhoto1: 'https://raw.githubusercontent.com/WNobsi/reeva-lentine/a20233da616d41aa9569e05336e03134c0e12b7d/photos/success-1.jpg', // Example: 'photos/us1.jpg'
            successPhoto2: 'https://raw.githubusercontent.com/WNobsi/reeva-lentine/a20233da616d41aa9569e05336e03134c0e12b7d/photos/success-2.jpg', // Example: 'photos/us2.jpg'
            successPhoto3: 'https://raw.githubusercontent.com/WNobsi/reeva-lentine/a20233da616d41aa9569e05336e03134c0e12b7d/photos/success-3.jpg', // Example: 'photos/us3.jpg'
            
            // Photo shown when they return after accepting
            memoryPhoto: 'https://raw.githubusercontent.com/WNobsi/reeva-lentine/a20233da616d41aa9569e05336e03134c0e12b7d/photos/memory-photo.jpg'  // Example: 'https://i.imgur.com/memory.jpg'
            
            // Captions for success screen photos
            caption1: 'You have showed me a part of life which I had never expected I will ever experience. I never knew what happiness or sadness actually meant. And yet all I could see was you and your smile. Making me realize what happiness meant.', // Example: 'Our first date at the beach'
            caption2: 'The smile and serenity you had shown to me when you looked at me that way. I will fight myself and my worse demons to have your hand and mind back to comfort and safety. To being mine.', // Example: 'When you made me laugh so hard'
            caption3: 'I promise to Respect you. Hold you. Protect you. Grow with you. Live with you. Be with you in every aspect of life possible. I swear to you. Nothing comes close to the way you make me smile and the way you make me feel happy.'  // Example: 'Forever my favorite person'
        
        };

        // Get all elements
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const questionScreen = document.getElementById('question-screen');
        const successScreen = document.getElementById('success-screen');
        const alreadyAcceptedScreen = document.getElementById('already-accepted-screen');
        const hint = document.getElementById('hint');
        const attemptCounter = document.getElementById('attemptCounter');
        const attemptCount = document.getElementById('attemptCount');
        const touchRing = document.getElementById('touchRing');
        const resetBtn = document.getElementById('resetBtn');
        const resetBtnSuccess = document.getElementById('resetBtnSuccess');
        const acceptanceDate = document.getElementById('acceptanceDate');

        // Image elements
        const questionPhoto = document.getElementById('questionPhoto');
        const successPhoto1 = document.getElementById('successPhoto1');
        const successPhoto2 = document.getElementById('successPhoto2');
        const successPhoto3 = document.getElementById('successPhoto3');
        const memoryPhoto = document.getElementById('memoryPhoto');
        const caption1 = document.getElementById('caption1');
        const caption2 = document.getElementById('caption2');
        const caption3 = document.getElementById('caption3');

        // ===== LOAD IMAGES IF URLs ARE PROVIDED =====
        function loadImages() {
            if (IMAGE_CONFIG.questionPhoto) {
                questionPhoto.src = IMAGE_CONFIG.questionPhoto;
                questionPhoto.classList.remove('hidden');
            }
            if (IMAGE_CONFIG.successPhoto1) {
                successPhoto1.src = IMAGE_CONFIG.successPhoto1;
                successPhoto1.classList.remove('hidden');
            }
            if (IMAGE_CONFIG.successPhoto2) {
                successPhoto2.src = IMAGE_CONFIG.successPhoto2;
                successPhoto2.classList.remove('hidden');
            }
            if (IMAGE_CONFIG.successPhoto3) {
                successPhoto3.src = IMAGE_CONFIG.successPhoto3;
                successPhoto3.classList.remove('hidden');
            }
            if (IMAGE_CONFIG.memoryPhoto) {
                memoryPhoto.src = IMAGE_CONFIG.memoryPhoto;
                memoryPhoto.classList.remove('hidden');
            }
            
            // Load captions
            if (IMAGE_CONFIG.caption1) {
                caption1.textContent = IMAGE_CONFIG.caption1;
            }
            if (IMAGE_CONFIG.caption2) {
                caption2.textContent = IMAGE_CONFIG.caption2;
            }
            if (IMAGE_CONFIG.caption3) {
                caption3.textContent = IMAGE_CONFIG.caption3;
            }
        }

        // ===== CHECK IF ALREADY ACCEPTED =====
        function checkAcceptanceStatus() {
            const accepted = localStorage.getItem('valentine_accepted');
            const acceptedDate = localStorage.getItem('valentine_accepted_date');
            
            if (accepted === 'true') {
                // They already said yes! Show the "already accepted" screen
                questionScreen.style.display = 'none';
                successScreen.style.display = 'none';
                alreadyAcceptedScreen.style.display = 'block';
                
                // Display the date they accepted
                if (acceptedDate) {
                    const date = new Date(acceptedDate);
                    const options = { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    };
                    acceptanceDate.textContent = `Accepted on: ${date.toLocaleDateString('en-US', options)}`;
                }
                
                return true;
            }
            return false;
        }

        // ===== SAVE ACCEPTANCE TO BROWSER =====
        function saveAcceptance() {
            localStorage.setItem('valentine_accepted', 'true');
            localStorage.setItem('valentine_accepted_date', new Date().toISOString());
        }

        // ===== RESET FUNCTION (for "Ask Me Again" button) =====
        resetBtn.addEventListener('click', function() {
            // Clear localStorage
            localStorage.removeItem('valentine_accepted');
            localStorage.removeItem('valentine_accepted_date');
            
            // Reset UI
            alreadyAcceptedScreen.style.display = 'none';
            successScreen.style.display = 'none';
            questionScreen.style.display = 'block';
            attempts = 0;
            attemptCount.textContent = '0';
            attemptCounter.style.display = 'none';
            hint.style.display = 'none';
            noBtn.textContent = 'No';
            
            // Reset NO button position to relative
            noBtn.style.position = 'relative';
            noBtn.style.left = '';
            noBtn.style.top = '';
            
            // Reinitialize NO button position
            setTimeout(() => {
                initializeNoButton();
            }, 100);
        });

        // ===== RESET FUNCTION FOR SUCCESS SCREEN =====
        resetBtnSuccess.addEventListener('click', function() {
            // Clear localStorage
            localStorage.removeItem('valentine_accepted');
            localStorage.removeItem('valentine_accepted_date');
            
            // Reset UI
            successScreen.style.display = 'none';
            alreadyAcceptedScreen.style.display = 'none';
            questionScreen.style.display = 'block';
            attempts = 0;
            attemptCount.textContent = '0';
            attemptCounter.style.display = 'none';
            hint.style.display = 'none';
            noBtn.textContent = 'No';
            
            // Reset NO button position to relative
            noBtn.style.position = 'relative';
            noBtn.style.left = '';
            noBtn.style.top = '';
            
            // Reinitialize NO button position
            setTimeout(() => {
                initializeNoButton();
            }, 100);
        });

        // State variables
        let attempts = 0;
        let isMoving = false;
        let noBtnRect = null;
        const DETECTION_RADIUS = 120; // Distance in pixels to detect finger proximity

        // Messages that change as user keeps trying
        const hintMessages = [
            "Oops! Almost got it! üòè",
            "So close! Try again! üòú",
            "Not quite! üôà",
            "The button is shy! üôä",
            "It's playing hard to get! üíî",
            "Come on, you know the answer! üòä",
            "Just say yes already! ü•∫",
            "The button agrees - say YES! üíï",
            "Why resist? Say yes! üòç",
            "You can't catch me! üèÉ",
            "Give up and say yes! ‚ù§Ô∏è"
        ];

        // Button text changes
        const buttonTexts = [
            "No",
            "Nope! üò§",
            "Not happening! üôÖ",
            "Never! üíî",
            "No way! üö´",
            "Absolutely not! ‚ùå",
            "Try the YES button! ‚ú®"
        ];

        // Initialize button position
        function initializeNoButton() {
            // Button starts with relative positioning (visible in normal flow)
            // When it needs to move, we'll change it to fixed
            updateNoBtnRect();
        }

        // Update button rectangle for collision detection
        function updateNoBtnRect() {
            noBtnRect = noBtn.getBoundingClientRect();
        }

        // Calculate distance between two points
        function getDistance(x1, y1, x2, y2) {
            return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        }

        // Move button to random position on screen
        function moveButtonAway(touchX, touchY) {
            if (isMoving) return;
            
            isMoving = true;
            attempts++;
            
            // Update counter
            attemptCount.textContent = attempts;
            attemptCounter.style.display = 'block';
            
            // Show hint
            hint.style.display = 'block';
            hint.textContent = hintMessages[Math.min(attempts - 1, hintMessages.length - 1)];
            
            // Change button text
            if (attempts <= buttonTexts.length) {
                noBtn.textContent = buttonTexts[Math.min(attempts, buttonTexts.length - 1)];
            }
            
            // Change to fixed positioning on first move
            if (attempts === 1) {
                noBtn.style.position = 'fixed';
            }
            
            // Get button dimensions
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            
            // Keep button on screen with padding
            const padding = 20;
            const maxX = window.innerWidth - btnWidth - padding;
            const maxY = window.innerHeight - btnHeight - padding;
            
            // Generate completely random position anywhere on screen
            let newX = Math.random() * maxX;
            let newY = Math.random() * maxY;
            
            // Ensure button doesn't overlap with YES button
            const yesBtnRect = yesBtn.getBoundingClientRect();
            const minDistance = 150; // Minimum distance from YES button
            
            let attempts_random = 0;
            while (attempts_random < 10) {
                const centerX = newX + btnWidth / 2;
                const centerY = newY + btnHeight / 2;
                const yesCenterX = yesBtnRect.left + yesBtnRect.width / 2;
                const yesCenterY = yesBtnRect.top + yesBtnRect.height / 2;
                
                const distance = Math.sqrt(
                    Math.pow(centerX - yesCenterX, 2) + 
                    Math.pow(centerY - yesCenterY, 2)
                );
                
                if (distance > minDistance) {
                    break; // Good position found
                }
                
                // Try a new random position
                newX = Math.random() * maxX;
                newY = Math.random() * maxY;
                attempts_random++;
            }
            
            // Ensure within bounds
            newX = Math.max(padding, Math.min(newX, maxX));
            newY = Math.max(padding, Math.min(newY, maxY));
            
            // Apply new position
            noBtn.style.left = newX + 'px';
            noBtn.style.top = newY + 'px';
            
            // Update rect
            setTimeout(() => {
                updateNoBtnRect();
                isMoving = false;
            }, 150);
        }

        // Check if touch is near button
        function checkProximity(touchX, touchY) {
            if (!noBtnRect) return false;
            
            const btnCenterX = noBtnRect.left + noBtnRect.width / 2;
            const btnCenterY = noBtnRect.top + noBtnRect.height / 2;
            
            const distance = getDistance(touchX, touchY, btnCenterX, btnCenterY);
            
            return distance < DETECTION_RADIUS;
        }

        // Handle touch start (mobile)
        function handleTouchStart(e) {
            const touch = e.touches[0];
            
            // Show touch ring
            touchRing.style.left = touch.clientX + 'px';
            touchRing.style.top = touch.clientY + 'px';
            touchRing.classList.add('active');
            
            if (checkProximity(touch.clientX, touch.clientY)) {
                e.preventDefault();
                moveButtonAway(touch.clientX, touch.clientY);
            }
        }

        // Handle touch move (when finger moves on screen)
        function handleTouchMove(e) {
            const touch = e.touches[0];
            
            // Update touch ring position
            touchRing.style.left = touch.clientX + 'px';
            touchRing.style.top = touch.clientY + 'px';
            
            if (checkProximity(touch.clientX, touch.clientY)) {
                e.preventDefault();
                moveButtonAway(touch.clientX, touch.clientY);
            }
        }

        // Handle touch end
        function handleTouchEnd(e) {
            touchRing.classList.remove('active');
        }

        // Handle mouse enter (desktop)
        function handleMouseEnter(e) {
            moveButtonAway(e.clientX, e.clientY);
        }

        // Handle mouse move (desktop)
        function handleMouseMove(e) {
            if (checkProximity(e.clientX, e.clientY)) {
                moveButtonAway(e.clientX, e.clientY);
            }
        }

        // Prevent any click on No button
        noBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            moveButtonAway(e.clientX || window.innerWidth / 2, e.clientY || window.innerHeight / 2);
            return false;
        }, true);

        // Prevent mousedown on No button
        noBtn.addEventListener('mousedown', (e) => {
            e.preventDefault();
            e.stopPropagation();
            moveButtonAway(e.clientX, e.clientY);
            return false;
        }, true);

        // Touch events for mobile (iOS specific)
        noBtn.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            e.preventDefault();
            e.stopPropagation();
            moveButtonAway(touch.clientX, touch.clientY);
            return false;
        }, { passive: false, capture: true });

        // Mouse hover for desktop
        noBtn.addEventListener('mouseenter', (e) => {
            e.preventDefault();
            moveButtonAway(e.clientX, e.clientY);
        }, true);

        // YES button handler
        yesBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            
            // Save acceptance to browser memory
            saveAcceptance();
            
            // Hide question screen and show success
            questionScreen.style.display = 'none';
            successScreen.style.display = 'block';
            attemptCounter.style.display = 'none';
            
            // Create heart confetti
            createHeartConfetti();
            
            // Add celebration sound (if you want to add audio)
            // const audio = new Audio('celebration.mp3');
            // audio.play();
        }, true);

        // Prevent YES button from being affected
        yesBtn.addEventListener('touchstart', (e) => {
            e.stopPropagation();
        });

        // Heart confetti animation
        function createHeartConfetti() {
            const hearts = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíù', 'üíò', 'üíû', 'üíì'];
            const colors = ['#ff1744', '#f50057', '#e91e63', '#ec407a'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.position = 'fixed';
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.top = '-50px';
                    heart.style.fontSize = (Math.random() * 40 + 20) + 'px';
                    heart.style.zIndex = '10000';
                    heart.style.pointerEvents = 'none';
                    heart.style.opacity = '1';
                    
                    // Random color tint
                    heart.style.filter = `hue-rotate(${Math.random() * 60}deg)`;
                    
                    document.body.appendChild(heart);
                    
                    // Animate falling
                    const duration = Math.random() * 2000 + 3000;
                    const drift = (Math.random() - 0.5) * 200;
                    
                    setTimeout(() => {
                        heart.style.transition = `all ${duration}ms ease-in`;
                        heart.style.top = '120vh';
                        heart.style.left = `calc(${heart.style.left} + ${drift}px)`;
                        heart.style.opacity = '0';
                        heart.style.transform = `rotate(${Math.random() * 360}deg)`;
                    }, 50);
                    
                    // Remove after animation
                    setTimeout(() => {
                        heart.remove();
                    }, duration + 100);
                }, i * 80);
            }
        }

        // Initialize on load (using both DOMContentLoaded and load for maximum compatibility)
        document.addEventListener('DOMContentLoaded', () => {
            // Load all images
            loadImages();
            
            // Check if they already accepted
            const alreadyAccepted = checkAcceptanceStatus();
            
            // Only initialize NO button if showing question screen
            if (!alreadyAccepted) {
                initializeNoButton();
            }
        });

        window.addEventListener('load', () => {
            // Load all images again (in case they weren't loaded before)
            loadImages();
            
            // Check if they already accepted
            const alreadyAccepted = checkAcceptanceStatus();
            
            // Only initialize NO button if showing question screen
            if (!alreadyAccepted) {
                initializeNoButton();
            }
        });

        // Update on resize
        window.addEventListener('resize', () => {
            updateNoBtnRect();
        });

        // Prevent context menu on long press (iOS)
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });

        // Prevent text selection
        document.addEventListener('selectstart', (e) => {
            if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
